{
  "permissions": {
    "allow": [
      "Bash(git clone:*)",
      "Bash(php -v:*)",
      "Bash(composer:*)",
      "Bash(php -r:*)",
      "Bash(php:*)",
      "Bash(npm install:*)",
      "Bash(mysql:*)",
      "Bash(\"/c/xampp2025/mysql/bin/mysql\" -u root -e \"CREATE DATABASE IF NOT EXISTS boxibox CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;\")",
      "Bash(timeout 120 php artisan:*)",
      "Bash(timeout 180 php artisan:*)",
      "Bash(npm run build)",
      "Bash(\"/c/xampp2025/mysql/bin/mysql\" -u root -e \"USE boxibox; SELECT COUNT(*) as users FROM users; SELECT COUNT(*) as tenants FROM tenants; SELECT COUNT(*) as roles FROM roles;\")",
      "Bash(timeout 30 php artisan tinker:*)",
      "Bash(timeout 300 php artisan:*)",
      "Bash(\"/c/xampp2025/mysql/bin/mysql\" -u root -e \"USE boxibox; SELECT id, code, tenant_id FROM sites WHERE code IN (''DEMO-MAIN'', ''DEMO-NORTH'');\")",
      "Bash(\"/c/xampp2025/mysql/bin/mysql\" -u root -e \"USE boxibox; SELECT COUNT(*) as sites FROM sites; SELECT COUNT(*) as boxes FROM boxes; SELECT COUNT(*) as customers FROM customers; SELECT COUNT(*) as contracts FROM contracts; SELECT COUNT(*) as invoices FROM invoices; SELECT COUNT(*) as payments FROM payments;\")",
      "WebSearch",
      "Bash(dir \"C:\\xampp2025\\htdocs\\boxnew\")",
      "Bash(findstr:*)",
      "Bash(dir:*)",
      "Bash(\"/c/xampp2025/mysql/bin/mysql\" -u root -e \"USE boxibox; DROP TABLE IF EXISTS migrations; CREATE TABLE migrations (id int unsigned NOT NULL AUTO_INCREMENT, migration varchar(255) NOT NULL, batch int NOT NULL, PRIMARY KEY (id)) ENGINE=InnoDB;\")",
      "Bash(\"/c/xampp2025/mysql/bin/mysql\" -u root -e \"USE boxibox; ALTER TABLE migrations DISCARD TABLESPACE;\")",
      "Bash(\"/c/xampp2025/mysql/bin/mysql\" -u root -e \"USE boxibox; DROP TABLE IF EXISTS migrations;\")",
      "Bash(\"/c/xampp2025/mysql/bin/mysql\" -u root -e \"DROP DATABASE IF EXISTS boxibox; CREATE DATABASE boxibox CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;\")",
      "Bash(\"/c/xampp2025/mysql/bin/mysql\" -u root -e \"USE boxibox; SELECT COUNT(*) as prospects FROM prospects; SELECT COUNT(*) as signatures FROM signatures; SELECT COUNT(*) as sepa_mandates FROM sepa_mandates; SELECT COUNT(*) as payment_reminders FROM payment_reminders;\")",
      "Bash(\"/c/xampp2025/mysql/bin/mysql\" -u root -e \"USE boxibox; SELECT id, name, slug FROM tenants; SELECT id, name, email, tenant_id FROM users LIMIT 5;\")",
      "Bash(\"/c/xampp2025/mysql/bin/mysql\" -u root -e \"SELECT 1\")",
      "Bash(\"/c/xampp2025/mysql/bin/mysql\" -u root -e \"SELECT 1 as test\")",
      "Bash(\"/c/xampp2025/mysql/bin/mysql\" -u root -e \"USE boxibox; DESCRIBE contracts;\")",
      "Bash(\"/c/xampp2025/mysql/bin/mysql\" -u root -e \"USE boxibox; DESCRIBE invoices;\")",
      "Bash(\"/c/xampp2025/mysql/bin/mysql\" -u root -e \"USE boxibox; SELECT COUNT(*) as tenants FROM tenants; SELECT COUNT(*) as sites FROM sites; SELECT COUNT(*) as boxes FROM boxes; SELECT COUNT(*) as customers FROM customers; SELECT COUNT(*) as contracts FROM contracts; SELECT COUNT(*) as invoices FROM invoices;\")",
      "Bash(git add:*)",
      "Bash(git commit:*)",
      "Bash(git config:*)",
      "Bash(git push)",
      "Bash(gh pr create:*)",
      "WebFetch(domain:storeganise.com)",
      "WebFetch(domain:stora.co)",
      "WebFetch(domain:www.sitelink.com)",
      "Bash(\"/c/xampp2025/mysql/bin/mysql\" -u root -e \"USE boxibox; DROP TABLE IF EXISTS chart_of_accounts, accounting_entry_lines, accounting_entries, accounting_journals, fec_exports, accounting_entity_mappings, accounting_sync_logs, accounting_connections, accounting_providers;\")",
      "Bash(\"/c/xampp2025/mysql/bin/mysql\" -u root -e \"USE boxibox; DELETE FROM migrations WHERE migration = ''2025_11_30_100700_create_accounting_integrations_tables'';\")",
      "Bash(\"/c/xampp2025/mysql/bin/mysql\" -u root -e \"USE boxibox; SELECT COUNT(*) as total_tables FROM information_schema.tables WHERE table_schema = ''boxibox'';\")",
      "Bash(timeout 30 php artisan:*)",
      "Bash(timeout 60 php artisan:*)",
      "Bash(curl:*)",
      "Bash(/c/xampp2025/mysql/bin/mysql:*)",
      "Bash(netstat:*)",
      "Bash(tasklist:*)",
      "WebFetch(domain:www.storeganise.com)",
      "WebFetch(domain:www.stora.co)",
      "Bash(done)",
      "Bash(cat:*)",
      "Bash(timeout 5 php artisan serve:*)",
      "Bash(mkdir -p:*)",
      "Bash(git reset:*)",
      "Bash(timeout 10 php artisan:*)",
      "Bash(xargs basename:*)",
      "WebFetch(domain:127.0.0.1)",
      "Bash(comm:*)",
      "Bash(\"/c/wamp64/bin/php/php8.1.0/composer.cmd\" require dedoc/scramble)",
      "Bash(\"/c/xampp2025/php/php\" -r \"copy(''https://getcomposer.org/installer'', ''composer-setup.php'');\")",
      "Bash(\"/c/xampp2025/php/php\" composer-setup.php)",
      "Bash(\"/c/xampp2025/php/php\" composer.phar require dedoc/scramble)",
      "Bash(\"/c/xampp2025/php/php\" composer.phar dump-autoload)",
      "Bash(\"/c/xampp2025/php/php\" composer.phar show dedoc/scramble)",
      "WebFetch(domain:preview.sprukomarket.com)",
      "WebFetch(domain:www.spruko.com)",
      "WebFetch(domain:demo.spruko.com)",
      "Bash(\"/c/xampp2025/php/php\" -l app/Http/Controllers/Customer/PortalController.php)",
      "Bash(/c/xampp2025/php/php -l:*)",
      "Bash(taskkill:*)",
      "Bash(attrib:*)",
      "Bash(chmod:*)",
      "Bash(start \"\" \"C:\\xampp2025\\mysql\\bin\\mysqld.exe\" --defaults-file=\"C:\\xampp2025\\mysql\\bin\\my.ini\")",
      "Bash(timeout:*)",
      "Bash(where:*)",
      "Bash(\"/c/laragon/bin/mysql/mysql-8.4.3-winx64/bin/mysql\" -u root -e \"SELECT 1 as test\")",
      "Bash(\"/c/laragon/bin/mysql/mysql-8.4.3-winx64/bin/mysql\" -u root -e \"DROP DATABASE IF EXISTS boxibox; CREATE DATABASE boxibox CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci; SHOW DATABASES LIKE ''boxibox'';\")",
      "Bash(ls:*)",
      "Bash(\"/c/laragon/bin/mysql/mysql-8.4.3-winx64/bin/mysql\" -u root -e \"DROP DATABASE IF EXISTS boxibox; CREATE DATABASE boxibox CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;\")",
      "Bash(\"/c/laragon/bin/mysql/mysql-8.4.3-winx64/bin/mysql\":*)",
      "Bash(\"/c/laragon/bin/mysql/mysql-8.4.3-winx64/bin/mysql\" -u root -e \"USE boxibox; SELECT COUNT(*) as tenants FROM tenants; SELECT COUNT(*) as sites FROM sites; SELECT COUNT(*) as boxes FROM boxes; SELECT COUNT(*) as customers FROM customers; SELECT COUNT(*) as contracts FROM contracts; SELECT COUNT(*) as invoices FROM invoices; SELECT COUNT(*) as users FROM users;\")",
      "Bash(\"/c/laragon/bin/mysql/mysql-8.4.3-winx64/bin/mysql\" -u root -e \"USE boxibox; SELECT id, name, email, tenant_id FROM users;\")",
      "Bash(\"/c/laragon/bin/mysql/mysql-8.4.3-winx64/bin/mysql\" -u root -e \"USE boxibox; SELECT id, name, slug, is_active FROM tenants; SELECT id, name, code, tenant_id FROM sites LIMIT 5;\")",
      "Bash(\"/c/laragon/bin/mysql/mysql-8.4.3-winx64/bin/mysql\" -u root -e \"USE boxibox; SELECT id, name, size_m2, monthly_price_ht, status FROM boxes WHERE tenant_id=1 LIMIT 10;\")",
      "Bash(\"/c/laragon/bin/mysql/mysql-8.4.3-winx64/bin/mysql\" -u root -e \"USE boxibox; DESCRIBE boxes;\")",
      "Bash(\"/c/laragon/bin/mysql/mysql-8.4.3-winx64/bin/mysql\" -u root -e \"USE boxibox; SELECT id, number, name, status, base_price FROM boxes WHERE site_id=5 LIMIT 10;\")",
      "Bash(\"/c/laragon/bin/mysql/mysql-8.4.3-winx64/bin/mysql\" -u root -e \"USE boxibox; DESCRIBE loyalty_rewards;\")",
      "Bash(\"/c/laragon/bin/mysql/mysql-8.4.3-winx64/bin/mysql\" -u root -e \"USE boxibox; SELECT * FROM calculator_widgets LIMIT 5;\")",
      "Bash(\"/c/laragon/bin/mysql/mysql-8.4.3-winx64/bin/mysql\" -u root -e \"USE boxibox; DESCRIBE sites;\")",
      "Bash(\"/c/laragon/bin/mysql/mysql-8.4.3-winx64/bin/mysql\" -u root -e \"USE boxibox; SHOW TABLES LIKE ''%access%'';\")",
      "Bash(\"/c/laragon/bin/mysql/mysql-8.4.3-winx64/bin/mysql\" -u root -e \"USE boxibox; SHOW TABLES LIKE ''customer_access_codes'';\")",
      "Bash(\"/c/laragon/bin/mysql/mysql-8.4.3-winx64/bin/mysql\" -u root -e \"USE boxibox; SHOW TABLES LIKE ''guest_access_codes'';\")",
      "Bash(\"/c/laragon/bin/mysql/mysql-8.4.3-winx64/bin/mysql\" -u root -e \"USE boxibox; SELECT status, COUNT(*) as count FROM boxes GROUP BY status;\")",
      "Bash(\"/c/laragon/bin/mysql/mysql-8.4.3-winx64/bin/mysql\" -u root -e \"USE boxibox; SELECT s.id, s.name, s.is_active, COUNT(b.id) as boxes_count FROM sites s LEFT JOIN boxes b ON b.site_id = s.id WHERE b.status = ''available'' GROUP BY s.id, s.name, s.is_active;\")",
      "Bash(\"/c/laragon/bin/mysql/mysql-8.4.3-winx64/bin/mysql\" -u root -e \"USE boxibox; SELECT b.id, b.name, b.status, b.current_price, b.tenant_id, s.is_active as site_active FROM boxes b JOIN sites s ON b.site_id = s.id WHERE b.status = ''available'' LIMIT 10;\")",
      "Bash(\"/c/laragon/bin/mysql/mysql-8.4.3-winx64/bin/mysql\" -u root -e \"USE boxibox; SELECT b.id, b.number, b.name, b.status, b.volume, b.current_price, b.size_m2, b.size_category FROM boxes b WHERE b.status = ''available'' LIMIT 10;\")",
      "Bash(\"/c/laragon/bin/mysql/mysql-8.4.3-winx64/bin/mysql\" -u root -e \"USE boxibox; SELECT b.id, b.number, b.name, b.status, b.volume, b.current_price, b.length, b.width, b.height FROM boxes b WHERE b.status = ''available'' LIMIT 10;\")",
      "Bash(\"/c/laragon/bin/mysql/mysql-8.4.3-winx64/bin/mysql\" -u root -e \"USE boxibox; SHOW COLUMNS FROM boxes LIKE ''%size%'';\")",
      "Bash(\"/c/laragon/bin/mysql/mysql-8.4.3-winx64/bin/mysql\" -u root -e \"USE boxibox; DESCRIBE access_logs;\")",
      "Bash(find:*)",
      "Bash(\"/c/laragon/bin/mysql/mysql-8.4.3-winx64/bin/mysql\" -u root -e \"USE boxibox; SELECT id, first_name, last_name, email, IF(password IS NOT NULL AND password != '''', ''Oui'', ''Non'') as has_password FROM customers LIMIT 5;\")",
      "Bash(\"/c/laragon/bin/mysql/mysql-8.4.3-winx64/bin/mysql\" -u root -e \"USE boxibox; SELECT id, first_name, last_name, email FROM customers LIMIT 5;\")",
      "Bash(\"/c/laragon/bin/mysql/mysql-8.4.3-winx64/bin/mysql\" -u root -e \"USE boxibox; DESCRIBE customers;\")",
      "Bash(\"/c/laragon/bin/mysql/mysql-8.4.3-winx64/bin/mysql\" -u root -e \"USE boxibox; ALTER TABLE customers ADD COLUMN password VARCHAR(255) NULL AFTER email;\")",
      "Bash(\"/c/laragon/bin/mysql/mysql-8.4.3-winx64/bin/mysql\" -u root -e \"USE boxibox; ALTER TABLE support_tickets ADD COLUMN deleted_at TIMESTAMP NULL DEFAULT NULL;\")",
      "Bash(\"/c/laragon/bin/mysql/mysql-8.4.3-winx64/bin/mysql\" -u root -e \"USE boxibox; DESCRIBE support_messages;\")",
      "Bash(\"/c/laragon/bin/mysql/mysql-8.4.3-winx64/bin/mysql\" -u root -e \"USE boxibox; SHOW TABLES LIKE ''%payment%'';\")",
      "Bash(\"/c/laragon/bin/mysql/mysql-8.4.3-winx64/bin/mysql\" -u root -e \"USE boxibox; DESCRIBE saved_payment_methods;\")",
      "Bash(\"/c/laragon/bin/mysql/mysql-8.4.3-winx64/bin/mysql\" -u root -e \"USE boxibox; DESCRIBE contracts;\")",
      "Bash(\"/c/laragon/bin/mysql/mysql-8.4.3-winx64/bin/mysql\" -u root -e \"USE boxibox; SHOW COLUMNS FROM customers LIKE ''referral_code'';\")",
      "Bash(\"/c/laragon/bin/mysql/mysql-8.4.3-winx64/bin/mysql\" -u root -e \"USE boxibox; ALTER TABLE customers ADD COLUMN referral_code VARCHAR(20) NULL AFTER allow_guest_access;\")",
      "Bash(\"/c/laragon/bin/mysql/mysql-8.4.3-winx64/bin/mysql\" -u root -e \"USE boxibox; SHOW TABLES LIKE ''%insurance%''; SHOW TABLES LIKE ''%protection%'';\")",
      "Bash(\"/c/laragon/bin/mysql/mysql-8.4.3-winx64/bin/mysql\" -u root -e \"USE boxibox; DESCRIBE insurance_plans; DESCRIBE insurance_policies;\")",
      "Bash(\"/c/laragon/bin/mysql/mysql-8.4.3-winx64/bin/mysql\" -u root -e \"USE boxibox; SELECT * FROM insurance_plans LIMIT 5; SELECT COUNT(*) as total FROM insurance_plans;\")",
      "Bash(\"/c/laragon/bin/mysql/mysql-8.4.3-winx64/bin/mysql\" -u root -e \"USE boxibox; SELECT COUNT(*) as providers FROM insurance_providers; SELECT COUNT(*) as plans FROM insurance_plans;\")",
      "Bash(\"/c/laragon/bin/mysql/mysql-8.4.3-winx64/bin/mysql\" -u root -e \"USE boxibox; DESCRIBE insurance_providers;\")",
      "Bash(\"/c/laragon/bin/mysql/mysql-8.4.3-winx64/bin/mysql\" -u root -e \"USE boxibox; SELECT id, name, slug FROM insurance_providers; SELECT id, name, code, price_monthly, coverage_amount, is_default FROM insurance_plans;\")",
      "Bash(\"/c/laragon/bin/mysql/mysql-8.4.3-winx64/bin/mysql\" -u root -e \"USE boxibox; SELECT id, first_name, last_name, email, IF(password IS NOT NULL AND password != '''', ''Oui'', ''Non'') as has_password FROM customers LIMIT 10;\")",
      "Bash(\"/c/laragon/bin/mysql/mysql-8.4.3-winx64/bin/mysql\" -u root -e \"USE boxibox; SELECT id, first_name, last_name, email, password FROM customers LIMIT 5;\")",
      "Bash(\"/c/laragon/bin/mysql/mysql-8.4.3-winx64/bin/mysql\" -u root -e \"USE boxibox; DESCRIBE notification_preferences;\")",
      "Bash(\"/c/laragon/bin/mysql/mysql-8.4.3-winx64/bin/mysql\" -u root -e \"USE boxibox; SHOW TABLES LIKE ''%customer%notification%'';\")",
      "Bash(\"/c/laragon/bin/mysql/mysql-8.4.3-winx64/bin/mysql\" -u root -e \"USE boxibox; \nCREATE TABLE IF NOT EXISTS customer_notification_preferences (\n    id BIGINT UNSIGNED AUTO_INCREMENT PRIMARY KEY,\n    customer_id BIGINT UNSIGNED NOT NULL,\n    email_invoices BOOLEAN DEFAULT TRUE,\n    email_reminders BOOLEAN DEFAULT TRUE,\n    email_marketing BOOLEAN DEFAULT FALSE,\n    sms_invoices BOOLEAN DEFAULT FALSE,\n    sms_reminders BOOLEAN DEFAULT TRUE,\n    push_enabled BOOLEAN DEFAULT TRUE,\n    created_at TIMESTAMP NULL,\n    updated_at TIMESTAMP NULL,\n    UNIQUE KEY unique_customer (customer_id),\n    FOREIGN KEY (customer_id) REFERENCES customers(id) ON DELETE CASCADE\n) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;\")",
      "Bash(\"/c/laragon/bin/mysql/mysql-8.4.3-winx64/bin/mysql\" -u root -e \"USE boxibox; \n-- Add AI scoring fields to leads\nALTER TABLE leads ADD COLUMN IF NOT EXISTS conversion_probability DECIMAL(5,2) NULL AFTER score;\nALTER TABLE leads ADD COLUMN IF NOT EXISTS score_breakdown JSON NULL AFTER conversion_probability;\nALTER TABLE leads ADD COLUMN IF NOT EXISTS score_factors JSON NULL AFTER score_breakdown;\nALTER TABLE leads ADD COLUMN IF NOT EXISTS last_contacted_at TIMESTAMP NULL;\nALTER TABLE leads ADD COLUMN IF NOT EXISTS last_activity_at TIMESTAMP NULL;\n\n-- Update priority enum if needed\nALTER TABLE leads MODIFY COLUMN priority ENUM(''very_hot'', ''hot'', ''warm'', ''lukewarm'', ''cold'') DEFAULT ''cold'';\n\n-- Add AI scoring fields to prospects\nALTER TABLE prospects ADD COLUMN IF NOT EXISTS conversion_probability DECIMAL(5,2) NULL AFTER score;\nALTER TABLE prospects ADD COLUMN IF NOT EXISTS score_breakdown JSON NULL AFTER conversion_probability;\nALTER TABLE prospects ADD COLUMN IF NOT EXISTS score_factors JSON NULL AFTER score_breakdown;\nALTER TABLE prospects ADD COLUMN IF NOT EXISTS last_contacted_at TIMESTAMP NULL;\nALTER TABLE prospects ADD COLUMN IF NOT EXISTS last_activity_at TIMESTAMP NULL;\n\n-- Update priority enum for prospects\nALTER TABLE prospects MODIFY COLUMN priority ENUM(''very_hot'', ''hot'', ''warm'', ''lukewarm'', ''cold'') DEFAULT ''cold'';\n\n-- Show columns to verify\nDESCRIBE leads;\")",
      "Bash(\"/c/laragon/bin/mysql/mysql-8.4.3-winx64/bin/mysql\" -u root -e \"USE boxibox; DESCRIBE leads;\")",
      "Bash(\"/c/laragon/bin/mysql/mysql-8.4.3-winx64/bin/mysql\" -u root -e \"USE boxibox; \nALTER TABLE leads ADD COLUMN conversion_probability DECIMAL(5,2) NULL AFTER score;\nALTER TABLE leads ADD COLUMN score_breakdown JSON NULL AFTER conversion_probability;\nALTER TABLE leads ADD COLUMN score_factors JSON NULL AFTER score_breakdown;\nALTER TABLE leads ADD COLUMN last_activity_at TIMESTAMP NULL AFTER last_contacted_at;\")",
      "Bash(\"/c/laragon/bin/mysql/mysql-8.4.3-winx64/bin/mysql\" -u root -e \"USE boxibox; DESCRIBE prospects;\")",
      "Bash(\"/c/laragon/bin/mysql/mysql-8.4.3-winx64/bin/mysql\" -u root -e \"USE boxibox; \nALTER TABLE prospects ADD COLUMN conversion_probability DECIMAL(5,2) NULL AFTER score;\nALTER TABLE prospects ADD COLUMN score_breakdown JSON NULL AFTER conversion_probability;\nALTER TABLE prospects ADD COLUMN score_factors JSON NULL AFTER score_breakdown;\nALTER TABLE prospects ADD COLUMN last_activity_at TIMESTAMP NULL AFTER score_calculated_at;\nALTER TABLE prospects MODIFY COLUMN priority ENUM(''very_hot'', ''hot'', ''warm'', ''lukewarm'', ''cold'') DEFAULT ''cold'';\")",
      "Bash(\"/c/laragon/bin/mysql/mysql-8.4.3-winx64/bin/mysql\" -u root -e \"USE boxibox; \nSELECT COLUMN_NAME FROM INFORMATION_SCHEMA.COLUMNS WHERE TABLE_SCHEMA = ''boxibox'' AND TABLE_NAME = ''leads'' AND COLUMN_NAME IN (''conversion_probability'', ''score_breakdown'', ''score_factors'', ''last_activity_at'');\nSELECT ''---'' as separator;\nSELECT COLUMN_NAME FROM INFORMATION_SCHEMA.COLUMNS WHERE TABLE_SCHEMA = ''boxibox'' AND TABLE_NAME = ''prospects'' AND COLUMN_NAME IN (''conversion_probability'', ''score_breakdown'', ''score_factors'', ''last_activity_at'');\")",
      "Bash(\"/c/laragon/bin/mysql/mysql-8.4.3-winx64/bin/mysql\" -u root -e \"USE boxibox; SELECT COLUMN_NAME FROM INFORMATION_SCHEMA.COLUMNS WHERE TABLE_SCHEMA = ''boxibox'' AND TABLE_NAME = ''prospects'' AND COLUMN_NAME IN (''conversion_probability'', ''score_breakdown'', ''score_factors'', ''last_activity_at'');\")",
      "Bash(\"/c/laragon/bin/mysql/mysql-8.4.3-winx64/bin/mysql\" -u root -e \"USE boxibox; INSERT INTO migrations (migration, batch) VALUES (''2025_12_14_150000_add_ai_scoring_fields_to_leads_and_prospects'', (SELECT MAX(batch) + 1 FROM migrations m));\")",
      "Bash(\"/c/laragon/bin/mysql/mysql-8.4.3-winx64/bin/mysql\" -u root -e \"USE boxibox; SELECT first_name, last_name, score, priority, conversion_probability FROM leads WHERE email LIKE ''%@demo-scoring%'' ORDER BY score DESC;\")",
      "Bash(\"/c/laragon/bin/mysql/mysql-8.4.3-winx64/bin/mysql\" -u root -e \"USE boxibox; SELECT first_name, last_name, score, priority, conversion_probability, JSON_EXTRACT(score_breakdown, ''$.behavior'') as behavior_score FROM leads WHERE email LIKE ''%@demo-scoring%'' ORDER BY score DESC LIMIT 10;\")",
      "Bash(\"/c/laragon/bin/mysql/mysql-8.4.3-winx64/bin/mysql\" -u root -e \"USE boxibox; SELECT first_name, last_name, score, priority, conversion_probability, JSON_LENGTH(score_breakdown) as breakdown_count, JSON_LENGTH(score_factors) as factors_count FROM prospects WHERE email LIKE ''%@demo-scoring%'' ORDER BY score DESC;\")",
      "Bash(\"/c/laragon/bin/mysql/mysql-8.4.3-winx64/bin/mysql\" -u root -e \"USE boxibox; SELECT id, email, tenant_id FROM users WHERE tenant_id = 1 LIMIT 3;\")",
      "Bash(\"/c/laragon/bin/mysql/mysql-8.4.3-winx64/bin/mysql\" -u root -e \"USE boxibox; SELECT id, name, email, tenant_id FROM users WHERE email LIKE ''%superadmin%'' OR email LIKE ''%admin%'' LIMIT 10;\")",
      "Bash(\"/c/laragon/bin/mysql/mysql-8.4.3-winx64/bin/mysql\" -u root -e \"USE boxibox; SELECT u.id, u.name, u.email, r.name as role FROM users u LEFT JOIN model_has_roles mhr ON u.id = mhr.model_id AND mhr.model_type = ''App\\\\Models\\\\User'' LEFT JOIN roles r ON mhr.role_id = r.id WHERE u.id = 3;\")",
      "Bash(\"/c/laragon/bin/mysql/mysql-8.4.3-winx64/bin/mysql\" -u root -e \"USE boxibox; SELECT id, name, guard_name FROM roles;\")",
      "Bash(\"/c/laragon/bin/mysql/mysql-8.4.3-winx64/bin/mysql\" -u root -e \"USE boxibox; INSERT INTO model_has_roles (role_id, model_type, model_id) VALUES (1, ''App\\\\Models\\\\User'', 3) ON DUPLICATE KEY UPDATE role_id = 1;\")",
      "Bash(\"/c/laragon/bin/mysql/mysql-8.4.3-winx64/bin/mysql\" -u root -e \"USE boxibox; SELECT u.id, u.name, u.email, u.tenant_id, r.name as role FROM users u LEFT JOIN model_has_roles mhr ON u.id = mhr.model_id AND mhr.model_type = ''App\\\\Models\\\\User'' LEFT JOIN roles r ON mhr.role_id = r.id WHERE u.id = 3;\")",
      "Bash(\"/c/laragon/bin/mysql/mysql-8.4.3-winx64/bin/mysql\" -u root -e \"USE boxibox; SHOW TABLES LIKE ''%tenant_usage%''; SHOW TABLES LIKE ''%tenant_credit%''; SHOW TABLES LIKE ''%credit_pack%''; SHOW TABLES LIKE ''%subscription_plan%'';\")",
      "Bash(\"/c/laragon/bin/mysql/mysql-8.4.3-winx64/bin/mysql\" -u root -e \"USE boxibox;\n\n-- Table tenant_usage\nCREATE TABLE IF NOT EXISTS tenant_usage (\n    id BIGINT UNSIGNED AUTO_INCREMENT PRIMARY KEY,\n    tenant_id BIGINT UNSIGNED NOT NULL,\n    period_start DATE NOT NULL,\n    period_end DATE NOT NULL,\n    emails_sent INT DEFAULT 0,\n    emails_quota INT DEFAULT 0,\n    emails_from_credits INT DEFAULT 0,\n    sms_sent INT DEFAULT 0,\n    sms_quota INT DEFAULT 0,\n    sms_from_credits INT DEFAULT 0,\n    emails_opened INT DEFAULT 0,\n    emails_clicked INT DEFAULT 0,\n    sms_delivered INT DEFAULT 0,\n    sms_replied INT DEFAULT 0,\n    overage_cost DECIMAL(10,2) DEFAULT 0,\n    overage_billed BOOLEAN DEFAULT FALSE,\n    created_at TIMESTAMP NULL,\n    updated_at TIMESTAMP NULL,\n    UNIQUE KEY unique_tenant_period (tenant_id, period_start),\n    INDEX idx_tenant_id (tenant_id),\n    FOREIGN KEY (tenant_id) REFERENCES tenants(id) ON DELETE CASCADE\n) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;\n\nSELECT ''tenant_usage created'' as status;\")",
      "Bash(\"/c/laragon/bin/mysql/mysql-8.4.3-winx64/bin/mysql\" -u root -e \"USE boxibox;\n\n-- Table tenant_credits\nCREATE TABLE IF NOT EXISTS tenant_credits (\n    id BIGINT UNSIGNED AUTO_INCREMENT PRIMARY KEY,\n    tenant_id BIGINT UNSIGNED NOT NULL,\n    type ENUM(''email'', ''sms'') NOT NULL,\n    credits_purchased INT NOT NULL,\n    credits_remaining INT NOT NULL,\n    amount_paid DECIMAL(10,2) DEFAULT 0,\n    currency VARCHAR(3) DEFAULT ''EUR'',\n    payment_method VARCHAR(50) DEFAULT ''manual'',\n    stripe_payment_id VARCHAR(255) NULL,\n    purchased_at TIMESTAMP NULL,\n    expires_at TIMESTAMP NULL,\n    status ENUM(''active'', ''expired'', ''exhausted'') DEFAULT ''active'',\n    created_at TIMESTAMP NULL,\n    updated_at TIMESTAMP NULL,\n    INDEX idx_tenant_type_status (tenant_id, type, status),\n    INDEX idx_expires (expires_at),\n    FOREIGN KEY (tenant_id) REFERENCES tenants(id) ON DELETE CASCADE\n) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;\n\nSELECT ''tenant_credits created'' as status;\")",
      "Bash(\"/c/laragon/bin/mysql/mysql-8.4.3-winx64/bin/mysql\" -u root -e \"USE boxibox;\n\n-- Table credit_packs\nCREATE TABLE IF NOT EXISTS credit_packs (\n    id BIGINT UNSIGNED AUTO_INCREMENT PRIMARY KEY,\n    name VARCHAR(255) NOT NULL,\n    type ENUM(''email'', ''sms'') NOT NULL,\n    credits INT NOT NULL,\n    price DECIMAL(10,2) NOT NULL,\n    currency VARCHAR(3) DEFAULT ''EUR'',\n    price_per_unit DECIMAL(10,4) NULL,\n    validity_days INT NULL,\n    is_active BOOLEAN DEFAULT TRUE,\n    sort_order INT DEFAULT 0,\n    created_at TIMESTAMP NULL,\n    updated_at TIMESTAMP NULL\n) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci;\n\nSELECT ''credit_packs created'' as status;\")",
      "Bash(\"/c/laragon/bin/mysql/mysql-8.4.3-winx64/bin/mysql\" -u root -e \"USE boxibox;\n\n-- Add email/sms quota columns to subscription_plans if not exist\nALTER TABLE subscription_plans \n    ADD COLUMN IF NOT EXISTS emails_per_month INT DEFAULT 500,\n    ADD COLUMN IF NOT EXISTS email_tracking_enabled BOOLEAN DEFAULT TRUE,\n    ADD COLUMN IF NOT EXISTS custom_email_provider_allowed BOOLEAN DEFAULT FALSE,\n    ADD COLUMN IF NOT EXISTS sms_per_month INT DEFAULT 0,\n    ADD COLUMN IF NOT EXISTS custom_sms_provider_allowed BOOLEAN DEFAULT FALSE,\n    ADD COLUMN IF NOT EXISTS api_access BOOLEAN DEFAULT FALSE,\n    ADD COLUMN IF NOT EXISTS whitelabel BOOLEAN DEFAULT FALSE;\n\nSELECT ''subscription_plans updated'' as status;\")",
      "Bash(\"/c/laragon/bin/mysql/mysql-8.4.3-winx64/bin/mysql\" -u root -e \"USE boxibox; SHOW COLUMNS FROM subscription_plans LIKE ''emails_per_month'';\")",
      "Bash(\"/c/laragon/bin/mysql/mysql-8.4.3-winx64/bin/mysql\" -u root -e \"USE boxibox;\n\nALTER TABLE subscription_plans \n    ADD COLUMN emails_per_month INT DEFAULT 500,\n    ADD COLUMN email_tracking_enabled BOOLEAN DEFAULT TRUE,\n    ADD COLUMN custom_email_provider_allowed BOOLEAN DEFAULT FALSE,\n    ADD COLUMN sms_per_month INT DEFAULT 0,\n    ADD COLUMN custom_sms_provider_allowed BOOLEAN DEFAULT FALSE,\n    ADD COLUMN api_access BOOLEAN DEFAULT FALSE,\n    ADD COLUMN whitelabel BOOLEAN DEFAULT FALSE;\n\nSELECT ''subscription_plans updated'' as status;\")",
      "Bash(\"/c/laragon/bin/mysql/mysql-8.4.3-winx64/bin/mysql\" -u root -e \"USE boxibox; SHOW COLUMNS FROM tenants LIKE ''current_plan_id'';\")",
      "Bash(\"/c/laragon/bin/mysql/mysql-8.4.3-winx64/bin/mysql\" -u root -e \"USE boxibox; SHOW COLUMNS FROM tenants LIKE ''emails_sent_this_month'';\")",
      "Bash(\"/c/laragon/bin/mysql/mysql-8.4.3-winx64/bin/mysql\" -u root -e \"USE boxibox;\n\nALTER TABLE tenants \n    ADD COLUMN emails_sent_this_month INT DEFAULT 0,\n    ADD COLUMN sms_sent_this_month INT DEFAULT 0,\n    ADD COLUMN usage_reset_at TIMESTAMP NULL;\n\nSELECT ''tenants updated'' as status;\")",
      "Bash(\"/c/laragon/bin/mysql/mysql-8.4.3-winx64/bin/mysql\" -u root -e \"USE boxibox;\n\nINSERT INTO credit_packs (name, type, credits, price, currency, price_per_unit, validity_days, is_active, sort_order, created_at, updated_at) VALUES\n(''Pack 1 000 Emails'', ''email'', 1000, 5.00, ''EUR'', 0.005, 365, TRUE, 1, NOW(), NOW()),\n(''Pack 5 000 Emails'', ''email'', 5000, 20.00, ''EUR'', 0.004, 365, TRUE, 2, NOW(), NOW()),\n(''Pack 10 000 Emails'', ''email'', 10000, 35.00, ''EUR'', 0.0035, 365, TRUE, 3, NOW(), NOW()),\n(''Pack 50 000 Emails'', ''email'', 50000, 150.00, ''EUR'', 0.003, 365, TRUE, 4, NOW(), NOW()),\n(''Pack 50 SMS'', ''sms'', 50, 5.00, ''EUR'', 0.10, 365, TRUE, 10, NOW(), NOW()),\n(''Pack 100 SMS'', ''sms'', 100, 9.00, ''EUR'', 0.09, 365, TRUE, 11, NOW(), NOW()),\n(''Pack 500 SMS'', ''sms'', 500, 40.00, ''EUR'', 0.08, 365, TRUE, 12, NOW(), NOW()),\n(''Pack 1 000 SMS'', ''sms'', 1000, 75.00, ''EUR'', 0.075, 365, TRUE, 13, NOW(), NOW());\n\nSELECT COUNT(*) as packs_created FROM credit_packs;\")",
      "Bash(\"/c/laragon/bin/mysql/mysql-8.4.3-winx64/bin/mysql\" -u root -e \"USE boxibox; SHOW TABLES LIKE ''%calculator%'';\")",
      "Bash(\"/c/laragon/bin/mysql/mysql-8.4.3-winx64/bin/mysql\" -u root -e \"USE boxibox; DESCRIBE floors;\")",
      "Bash(git -C \"C:\\laragon\\www\\boxnew\" log --oneline -10)",
      "Bash(/c/laragon/bin/php/php-8.4.4/php:*)",
      "Bash(\"/c/laragon/bin/mysql/mysql-8.4.3-winx64/bin/mysql\" -u root -e \"USE boxibox; SHOW TABLES LIKE ''%provider%''; SHOW TABLES LIKE ''%email%''; SHOW TABLES LIKE ''%sms%'';\")",
      "Bash(\"/c/laragon/bin/mysql/mysql-8.4.3-winx64/bin/mysql\" -u root -e \"USE boxibox; SHOW TABLES LIKE ''%provider%''; SHOW TABLES LIKE ''%send_logs%'';\")",
      "Bash(\"/c/laragon/bin/mysql/mysql-8.4.3-winx64/bin/mysql\" -u root -e \"USE boxibox; SELECT id, code, name, monthly_price, yearly_price, is_active, is_popular FROM subscription_plans ORDER BY sort_order;\")",
      "Bash(\"/c/laragon/bin/mysql/mysql-8.4.3-winx64/bin/mysql\" -u root -e \"USE boxibox; SELECT id, code, name, monthly_price, yearly_price, max_sites, max_boxes, max_users, emails_per_month, sms_per_month, api_access, whitelabel FROM subscription_plans ORDER BY sort_order;\")",
      "Bash(\"/c/laragon/bin/mysql/mysql-8.4.3-winx64/bin/mysql\" -u root -e \"USE boxibox; \n-- Update Starter plan\nUPDATE subscription_plans SET \n    monthly_price = 79.00,\n    yearly_price = 758.00,\n    yearly_discount = 20,\n    emails_per_month = 1000,\n    sms_per_month = 50,\n    max_sites = 1,\n    max_boxes = 100,\n    max_users = 3,\n    max_customers = 500,\n    api_access = 0,\n    whitelabel = 0,\n    email_tracking_enabled = 1,\n    custom_email_provider_allowed = 0,\n    custom_sms_provider_allowed = 0,\n    description = ''Idéal pour démarrer. Inclut tous les essentiels pour gérer votre activité.'',\n    is_popular = 0,\n    sort_order = 1\nWHERE code = ''starter'';\n\n-- Update Professional plan\nUPDATE subscription_plans SET \n    monthly_price = 149.00,\n    yearly_price = 1430.00,\n    yearly_discount = 20,\n    emails_per_month = 5000,\n    sms_per_month = 200,\n    max_sites = 2,\n    max_boxes = 300,\n    max_users = 10,\n    max_customers = 2000,\n    api_access = 0,\n    whitelabel = 0,\n    email_tracking_enabled = 1,\n    custom_email_provider_allowed = 0,\n    custom_sms_provider_allowed = 0,\n    description = ''Pour les opérateurs en croissance avec plusieurs sites.'',\n    is_popular = 1,\n    sort_order = 2\nWHERE code = ''professional'';\n\n-- Update Business plan\nUPDATE subscription_plans SET \n    monthly_price = 299.00,\n    yearly_price = 2870.00,\n    yearly_discount = 20,\n    emails_per_month = 15000,\n    sms_per_month = 500,\n    max_sites = 5,\n    max_boxes = 1000,\n    max_users = 25,\n    max_customers = 5000,\n    api_access = 1,\n    whitelabel = 0,\n    email_tracking_enabled = 1,\n    custom_email_provider_allowed = 1,\n    custom_sms_provider_allowed = 0,\n    description = ''Solution complète pour les réseaux multi-sites avec API.'',\n    is_popular = 0,\n    sort_order = 3\nWHERE code = ''business'';\n\n-- Update Enterprise plan\nUPDATE subscription_plans SET \n    monthly_price = 499.00,\n    yearly_price = 4790.00,\n    yearly_discount = 20,\n    emails_per_month = 50000,\n    sms_per_month = 2000,\n    max_sites = NULL,\n    max_boxes = NULL,\n    max_users = NULL,\n    max_customers = NULL,\n    api_access = 1,\n    whitelabel = 1,\n    email_tracking_enabled = 1,\n    custom_email_provider_allowed = 1,\n    custom_sms_provider_allowed = 1,\n    description = ''Solution sur mesure avec marque blanche et support dédié.'',\n    is_popular = 0,\n    sort_order = 4\nWHERE code = ''enterprise'';\n\nSELECT ''Plans updated'' as status;\")",
      "Bash(\"/c/laragon/bin/mysql/mysql-8.4.3-winx64/bin/mysql\" -u root -e \"USE boxibox; SELECT code, name, monthly_price, yearly_price, max_sites, max_boxes, emails_per_month, sms_per_month, api_access, whitelabel, is_popular FROM subscription_plans ORDER BY sort_order;\")",
      "Bash(\"/c/laragon/bin/mysql/mysql-8.4.3-winx64/bin/mysql\" -u root -e \"USE boxibox; SELECT id, code, name, category, is_core FROM modules ORDER BY category, sort_order LIMIT 50;\")",
      "Bash(\"/c/laragon/bin/mysql/mysql-8.4.3-winx64/bin/mysql\" -u root -e \"USE boxibox;\n\n-- Starter: Core modules + basic features (8 modules)\n-- Core (4) + Basic marketing/ops (4)\nUPDATE subscription_plans SET \n    included_modules = ''[1, 2, 3, 4, 5, 9, 10, 14]''\nWHERE code = ''starter'';\n\n-- Professional: Starter + more marketing & operations (12 modules)\n-- Core (4) + All marketing (3) + Most operations (4) + Booking widget (1)\nUPDATE subscription_plans SET \n    included_modules = ''[1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 14]''\nWHERE code = ''professional'';\n\n-- Business: All except white label (18 modules)\n-- Everything except white_label\nUPDATE subscription_plans SET \n    included_modules = ''[1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20]''\nWHERE code = ''business'';\n\n-- Enterprise: All modules (21 modules)\nUPDATE subscription_plans SET \n    included_modules = ''[1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21]''\nWHERE code = ''enterprise'';\n\nSELECT code, name, included_modules FROM subscription_plans ORDER BY sort_order;\")",
      "Bash(pip install:*)",
      "Bash(python -m pip install:*)",
      "Bash(python scraper_self_stockage.py:*)",
      "Bash(python enrichir_leads.py:*)",
      "Bash(python email_campaign.py:*)",
      "Bash(\"/c/laragon/bin/mysql/mysql-8.4.3-winx64/bin/mysql\" -u root -e \"USE boxibox; SHOW TABLES LIKE ''%activity%''; SHOW TABLES LIKE ''%interaction%''; SHOW TABLES LIKE ''%timeline%'';\")",
      "Bash(\"/c/laragon/bin/mysql/mysql-8.4.3-winx64/bin/mysql\" -u root -e \"USE boxibox; DESCRIBE activity_logs;\")",
      "Bash(\"/c/laragon/bin/mysql/mysql-8.4.3-winx64/bin/mysql\" -u root -e \"USE boxibox; SHOW TABLES LIKE ''%interaction%''; SHOW TABLES LIKE ''%note%''; SHOW TABLES LIKE ''%task%'';\")",
      "Bash(\"/c/laragon/bin/mysql/mysql-8.4.3-winx64/bin/mysql\" -u root -e \"USE boxibox; DROP TABLE IF EXISTS crm_interaction_attachments; DROP TABLE IF EXISTS crm_interactions; SELECT ''Tables dropped'' as status;\")",
      "Bash(\"/c/laragon/bin/mysql/mysql-8.4.3-winx64/bin/mysql\" -u root -e \"USE boxibox; DROP TABLE IF EXISTS crm_interaction_attachments; DROP TABLE IF EXISTS crm_interactions;\")",
      "Bash(\"/c/laragon/bin/mysql/mysql-8.4.3-winx64/bin/mysql\" -u root -e \"USE boxibox; DESCRIBE crm_interactions;\")",
      "Bash(/c/laragon/bin/mysql/mysql-8.4.3-winx64/bin/mysql:*)",
      "Bash(\"C:/xampp2025/php/php.exe\" artisan migrate --path=database/migrations/2025_12_17_120000_create_media_galleries_tables.php)",
      "Bash(\"C:/xampp2025/php/php.exe\":*)",
      "Bash(\"C:/xampp2025/php/php.exe\" -l \"C:/laragon/www/boxnew/boxibox-app/app/Models/SiteMedia.php\")",
      "Bash(\"C:/xampp2025/php/php.exe\" -l \"C:/laragon/www/boxnew/boxibox-app/app/Models/VirtualTour.php\")",
      "Bash(\"C:/xampp2025/php/php.exe\" -l \"C:/laragon/www/boxnew/boxibox-app/app/Models/VirtualTourPanorama.php\")",
      "WebFetch(domain:buxida.com)",
      "Bash(\"C:/xampp2025/php/php.exe\" -l \"C:/laragon/www/boxnew/boxibox-app/app/Services/SelfStorageKPIService.php\")",
      "Bash(\"C:/xampp2025/php/php.exe\" -l \"C:/laragon/www/boxnew/boxibox-app/app/Models/Box.php\")",
      "Bash(\"C:/xampp2025/php/php.exe\" -l \"C:/laragon/www/boxnew/boxibox-app/app/Models/User.php\")",
      "Bash(powershell -Command \"Get-Content ''C:\\laragon\\www\\boxnew\\boxibox-app\\storage\\logs\\laravel.log'' -Tail 150 | Select-String -Pattern ''exception|error|staff'' -Context 2,2\")",
      "Bash(powershell -Command \"Get-Content ''C:\\laragon\\www\\boxnew\\boxibox-app\\storage\\logs\\laravel.log'' -Tail 300 | Select-String -Pattern ''SQLSTATE|staff_profiles|payment_date'' -Context 3,3\")"
    ],
    "deny": [],
    "ask": []
  }
}
